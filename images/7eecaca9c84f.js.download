;(function($,document,undefined){var pluses=/\+/g;function raw(s){return s}function decoded(s){return decodeURIComponent(s.replace(pluses," "))}var config=$.cookie=function(key,value,options){if(value!==undefined){options=$.extend({},config.defaults,options);if(value===null){options.expires=-1}if(typeof options.expires==="number"){var days=options.expires,t=options.expires=new Date;t.setDate(t.getDate()+days)}value=config.json?JSON.stringify(value):String(value);return document.cookie=[encodeURIComponent(key),"=",config.raw?value:encodeURIComponent(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}var decode=config.raw?raw:decoded;var cookies=document.cookie.split("; ");for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split("=");if(decode(parts.shift())===key){var cookie=decode(parts.join("="));return config.json?JSON.parse(cookie):cookie}}return null};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)!==null){$.cookie(key,null,options);return true}return false}})(jQuery,document);

;$(function(){$(".changelang_loggedout").click(function(event){event.preventDefault();$.ajax({type:"POST",dataType:"json",url:"/i18n/setlang/",headers:{"X-CSRFToken":$.cookie("csrftoken")},data:{language:$(this).attr("data-langcode")||"en"},complete:function(request){if(request.responseJSON&&request.responseJSON.redirect_url){window.location.replace(request.responseJSON.redirect_url+location.search)}else{location.reload()}}})});function updateProfileLanguagePreference(){var stay_on_page=$(this).attr("stay-on-page")==="true";return $.ajax({type:"POST",dataType:"json",url:"/api/profile/",headers:{"X-CSRFToken":$.cookie("csrftoken")},data:{lang_preference:$(this).attr("data-langcode")},complete:function(request){if(request.responseJSON&&request.responseJSON.redirect_url&&!stay_on_page){window.location.replace(request.responseJSON.redirect_url+location.search)}else{location.reload()}}})}$(".changelang_loggedin").click(function(event){event.preventDefault();if(typeof window.glassboxLogger!=="undefined"&&!!window.glassboxLogger.logChangeLanguage){var logAttributes={target_language:$(this).attr("data-langcode")};window.glassboxLogger.logChangeLanguage(logAttributes).finally(updateProfileLanguagePreference.call(this))}else{updateProfileLanguagePreference.call(this)}})});
